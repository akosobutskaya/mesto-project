(()=>{"use strict";var e,t,r,n,o={542:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{J3:()=>_,YR:()=>p,b_:()=>f,f1:()=>m,hs:()=>y,n0:()=>d,un:()=>v,vm:()=>l});var o=r(177),a=r(688),c=r(113),u=e([o,c]);[o,c]=u.then?(await u)():u;var i={baseUrl:"https://nomoreparties.co/v1/plus-cohort-27",headers:{authorization:"945d8c08-a2b0-4b31-8bc8-ff311437b5f8","Content-Type":"application/json"}},s=function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))};function d(){return fetch("".concat(i.baseUrl,"/users/me"),{headers:i.headers}).then(s)}function l(){return fetch("".concat(i.baseUrl,"/cards"),{headers:i.headers}).then(s)}function p(e){return fetch("".concat(i.baseUrl,"/users/me"),{method:"PATCH",headers:i.headers,body:JSON.stringify(e)}).then(s).finally((function(){(0,c.k)(a.ft,!1)}))}function f(e){return fetch("".concat(i.baseUrl,"/cards "),{method:"POST",headers:i.headers,body:JSON.stringify(e)}).then(s).finally((function(){(0,c.k)(a.e2,!1)}))}function m(e){return fetch("".concat(i.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:i.headers}).then(s)}function v(e){return fetch("".concat(i.baseUrl,"/cards/likes/").concat(e.id),{method:"PUT",headers:i.headers}).then(s).then((function(t){(0,o.S)(e,t.likes.length,t.likes)}))}function y(e){return fetch("".concat(i.baseUrl,"/cards/likes/").concat(e.id),{method:"DELETE",headers:i.headers}).then(s).then((function(t){(0,o.S)(e,t.likes.length,t.likes)}))}function _(e){return fetch("".concat(i.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:i.headers,body:'{"avatar": "'.concat(e,'"}')}).then(s).finally((function(){(0,c.k)(a.XT,!1)}))}n()}catch(h){n(h)}}))},177:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{S:()=>m,U:()=>_});var o=r(372),a=r(688),c=r(712),u=r(542),i=e([c,u]);function s(e){e.classList.add("card_liked")}function d(e){e.classList.remove("card_liked")}function l(e){var t=e.target.closest(".card");"true"==t.getAttribute("likedbyowner")?(0,u.hs)(t):(0,u.un)(t)}function p(e){var t=e.target.closest(".card");t.remove(),(0,u.f1)(t.id)}function f(e){(0,o.M)(a.a5),a.LT.textContent=e.name,a.Y7.src=e.link,a.Y7.alt=e.name}function m(e,t,r){var n,o,a=e.querySelector(".card__like-count"),u=e.querySelector(".card__like");a.textContent=t,t>0?s(u):d(u),r&&(n=e,o=r.some((function(e){return e.name===c.E.name})),n.setAttribute("likedbyowner",o))}function v(e){var t=e.querySelector(".card__delete");t.removeAttribute("hidden"),t.addEventListener("click",p)}function y(e){var t=a.mW.cloneNode(!0),r=t.querySelector(".card__like");t.id=e._id,t.setAttribute("likedbyowner",e.likes.some((function(e){return e.name===c.E.name}))),t.querySelector(".card__text").textContent=e.name,t.querySelector(".card__delete").addEventListener("click",p),r.addEventListener("click",l);var n=t.querySelector(".card__image");return n.src=e.link,n.alt=e.name,n.addEventListener("click",(function(){return f(e)})),e.likes&&(m(t,e.likes.length),e.likes.length>0?s(r):d(r)),e.owner&&e.owner._id!==c.E._id||v(t),t}function _(e){e.forEach((function(e){a.XV.prepend(y(e))}))}[c,u]=i.then?(await i)():i,n()}catch(h){n(h)}}))},688:(e,t,r)=>{r.d(t,{$_:()=>l,AQ:()=>d,Ag:()=>y,DS:()=>i,EH:()=>E,J8:()=>k,KZ:()=>b,LS:()=>v,LT:()=>o,RX:()=>h,XT:()=>C,XV:()=>c,Y7:()=>a,a5:()=>n,e2:()=>g,f2:()=>f,ft:()=>x,mW:()=>u,mt:()=>S,nf:()=>L,pm:()=>s,qQ:()=>q,ri:()=>w,t1:()=>_,w4:()=>p,yk:()=>m});var n=document.querySelector(".popup#mesto"),o=n.querySelector(".popup__mesto-title"),a=n.querySelector(".popup__mesto-img"),c=document.querySelector(".cards-grid"),u=document.querySelector(".card-template").content.querySelector(".card"),i=document.querySelector(".popup#edit-profile"),s=document.querySelector(".popup#add-mesto"),d=document.querySelector(".popup#edit-avatar"),l=document.forms["edit-form"],p=document.forms["add-form"],f=document.forms["edit-avatar"],m=document.querySelector(".profile__edit-button"),v=document.querySelector(".profile__add-button"),y=(document.querySelectorAll(".popup__close-button"),document.querySelector(".profile__title")),_=document.querySelector(".profile__subtitle"),h=document.querySelector("#user-name"),b=document.querySelector("#user-job"),S=document.querySelector("#mesto-name"),k=document.querySelector("#mesto-src"),q=document.querySelector("#avatar-src"),E=document.querySelectorAll(".popup"),L=document.querySelector(".profile__avatar-edit"),w=document.querySelector(".profile__avatar"),C=document.querySelector(".popup__submit-button#avatar"),g=document.querySelector(".popup__submit-button#add-mesto"),x=document.querySelector(".popup__submit-button#edit-profile")},113:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{e:()=>_,k:()=>d});var o=r(372),a=r(177),c=r(108),u=r(542),i=r(688),s=e([a,u]);function d(e,t){e.innerHTML=t?"Сохранение...":"Сохранить"}function l(){(0,o.M)(i.DS),i.RX.value=i.Ag.textContent,i.KZ.value=i.t1.textContent}function p(){(0,o.M)(i.pm)}function f(){(0,o.M)(i.AQ)}function m(e){e.preventDefault(),d(i.ft,!0),i.Ag.textContent=i.RX.value,i.t1.textContent=i.KZ.value,(0,u.YR)({name:i.RX.value,about:i.KZ.value}),(0,o.j)(i.DS)}function v(e){e.preventDefault(),d(i.e2,!0);var t={};t.name=i.mt.value,t.link=i.J8.value,(0,a.U)([t]),(0,u.b_)(t),(0,o.j)(i.pm),e.target.reset(),(0,c.Qr)(i.pm,"popup__submit-button_disabled")}function y(e){e.preventDefault(),d(i.XT,!0),i.ri.src=i.qQ.value,(0,u.J3)(i.qQ.value),(0,o.j)(i.AQ)}function _(){i.yk.addEventListener("click",l),i.LS.addEventListener("click",p),i.nf.addEventListener("click",f),i.$_.addEventListener("submit",m),i.w4.addEventListener("submit",v),i.f2.addEventListener("submit",y)}[a,u]=s.then?(await s)():s,Array.from(i.EH).forEach((function(e){e.addEventListener("click",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close-button"))&&(0,o.j)(e)}))})),n()}catch(h){n(h)}}))},712:(e,t,r)=>{r.a(e,(async(e,n)=>{try{r.d(t,{E:()=>u,p:()=>i});var o=r(688),a=r(542),c=e([a]);a=(c.then?(await c)():c)[0];var u=await(0,a.n0)().then((function(e){return e}));function i(){o.Ag.textContent=u.name,o.t1.textContent=u.about,o.ri.src=u.avatar}n()}catch(s){n(s)}}),1)},372:(e,t,r)=>{function n(e){"Escape"===e.key&&a(document.querySelector(".popup_opened"))}function o(e){e.classList.add("popup_opened"),document.addEventListener("keydown",n)}function a(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",n),e.querySelector(".popup__submit-button")}r.d(t,{M:()=>o,j:()=>a})},108:(e,t,r)=>{function n(e,t){e.disabled=!0,e.classList.add(t)}function o(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){e.disabled=!1,e.classList.remove(t)}(t,r):n(t,r)}r.d(t,{Qr:()=>n,uK:()=>a});var a=function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=e.querySelector(t.submitButtonSelector),n=Array.from(e.querySelectorAll(t.inputSelector));o(n,r,t.inactiveButtonClass),n.forEach((function(a){a.addEventListener("input",(function(){!function(e,t,r){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));n.classList.remove(r.inputErrorClass),t.classList.remove(r.errorClass),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));o.classList.add(n.inputErrorClass),o.textContent=r,t.classList.add(n.errorClass)}(e,t,t.validationMessage,r)}(e,a,t),o(n,r,t.inactiveButtonClass)}))}))}(t,e)}))}},579:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var n=r(177),o=r(108),a=r(113),c=r(542),u=r(712),i=e([n,a,c,u]);[n,a,c,u]=i.then?(await i)():i,(0,u.p)();var s=await(0,c.vm)().then((function(e){return e}));(0,n.U)(s),(0,a.e)(),(0,o.uK)({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_active"}),t()}catch(e){t(e)}}),1)}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(o,a,c)=>{var u;c&&((u=[]).d=-1);var i,s,d,l=new Set,p=o.exports,f=new Promise(((e,t)=>{d=t,s=e}));f[t]=p,f[e]=e=>(u&&e(u),l.forEach(e),f.catch((e=>{}))),o.exports=f,a((o=>{var a;i=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{c[t]=e,n(a)}),(e=>{c[r]=e,n(a)}));var c={};return c[e]=e=>e(a),c}}var u={};return u[e]=e=>{},u[t]=o,u})))(o);var c=()=>i.map((e=>{if(e[r])throw e[r];return e[t]})),s=new Promise((t=>{(a=()=>t(c)).r=0;var r=e=>e!==u&&!l.has(e)&&(l.add(e),e&&!e.d&&(a.r++,e.push(a)));i.map((t=>t[e](r)))}));return a.r?s:c()}),(e=>(e?d(f[r]=e):s(p),n(u)))),u&&u.d<0&&(u.d=0)},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(579)})();